#!/usr/bin/env python

import logging
logging.raiseExceptions = False

import keyring
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('-s', '--service', required=True)
parser.add_argument('-a', '--account', required=True)
parser.add_argument('-p', '--password', required=False)
args = parser.parse_args()


if args.password:
  keyring.set_password(args.service, args.account, args.password)

else:
  secret = keyring.get_password(args.service, args.account)

  if secret:
    print secret
  else:
    exit(1)

